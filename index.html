<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>LeudiX Portfolio</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500&display=swap" rel="stylesheet">
    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel='stylesheet' type='text/css' media='screen' href='/css/main.css'>
    <link rel='stylesheet' type='text/css' media='screen' href='/css/bgterminal.css'>
    <!-- Latest Compilated javascript library -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
</head>

<body>
    <header>
        <div id="navbar">
            <!--<img id="logo" src="/imgs/logo12.png" alt="bussiness-logo">-->
            <a id="name" href="https://github.com/LeudiX">
                LeudiX
            </a>
            <a href="#contacts">#contacts</a>
            <a href="#about">#about</a>
            <a href="#skills">#skills</a>
            <a href="#projects">#projects</a>
            <a class="active" href="#home">#home</a>
        </div>
    </header>
    <div class="row">
        <div class='col-md-2 col-sm-1'></div>
        <div id="containerRow" class='col-md-8 col-sm-12'></div>
        <div class='col-md-2 col-sm-1'></div>
    </div>
    <section id="home">
        <div id="container1">
            <img id="picture" src="/imgs/profile.jpeg" alt="profile-logo">
            <h3 id="title1">
                Hi, I'm LeudiX
                <h5 id="subtitle1">
                    a software engineer with some skills<br>
                    in the development of games, webs and HCI systems...
                </h5>
            </h3>
            <h5 id="subtitle12">
                Do you wanna know me better?
                <br>
            </h5>
            <button id="cvdownload">See me CV </button>
        </div>
    </section>
    <section id="projects">
        <h3 id="title2">
            #projects
        </h3>
        <h5 id="subtitle2">
            Some stuff that i've done and others that i'm working on...
        </h5>
        <button id="projects1">View all</button>
    </section>
    <section id="skills">
        <h3 id="title3">
            #skills
        </h3>
        <h5 id="subtitle3">
            Some of my habilities with tech stacks and frameworks...
        </h5>
        <button id="skills1">View all</button>
    </section>
    <section id="about">
        <h3 id="title4">
            #about-me
        </h3>
        <h5 id="subtitle4">
            Just a common guy that love to make code stuffs...
        </h5>
        <button id="about1">View all</button>
    </section>
    <section id="contacts">
        <h3 id="title5">
            #contacts
        </h3>
        <h5 id="subtitle5">
            I'm open to all kind of work opportunities. However,
            if you want to chat, you can reach me at...
        </h5>
        <!-- Trigger/Open The Contact Modal -->
        <button id="contacts1" type="button" data-bs-toggle="modal" data-bs-target="#contactModal">Contact me</button>
        <!-- The Contact Modal -->
        <div class="modal fade" id="contactModal">

            <div class="modal-dialog modal-dialog-centered">
                <!-- Modal content -->
                <div class="modal-content">
                    <div class="modal-header">
                        <h5>Hi!!!. Send me a message:</h5>
                        <button type="button" class="btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="column">
                                <form action="/action_page.php" autocomplete="off">
                                    <label for="fname">Name</label>
                                    <input type="text" id="fname" name="firstname" placeholder="Your name..">
                                    <label for="femail">Email</label>
                                    <input type="email" id="femail" name="email" placeholder="Your email..">
                                    <label for="fsubject">Subject</label>
                                    <input type="text" id="fsubject" name="subject" placeholder="Hi!..">
                                    <label for="message">Message</label>
                                    <textarea id="message" name="message" placeholder="Write something.."
                                        style="height:50px"></textarea>
                                </form>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <input type="submit" id="contacts2" value="Send message">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <button onclick="topFunction()" id="myBtn" title="Go to top">
        <i class="fa fa-angle-double-up"></i>
        Up
    </button>
</body>

<!--Placing the js files add the end so the pages load faster-->
<script type="text/javascript" src="/js/jquery.bgterminal.min.js"></script>
<!--<script>
   async function func1() {
        return new Promise((resolve) => {
            $('#terminal').bgTerminal({
                url: '/backcodes/codelife.html',
                glow: true,
                speed: 25,
                wait: 0,
            });
            /*let sum = 2+3;
            console.info(sum);*/
            resolve(); 
        });
    }

    function func2() {
        $('#terminal2').bgTerminal({
            url: '/backcodes/codelife.html',
            glow: true,
            speed: 25,
            wait: 0
        });
        /*let sum = 5+3;
        console.info(sum);*/
    }


    $(document).on('ready', function () {
        func1().then(() => {
            func2();
        });
        Promise.all(promises).then(() => {
            console.info('All promises resolved');
        });
    });
</script>-->
<script>
    // Observer pattern implementation Following SOLID Principles
    class Observer {
        constructor() {
            this.observers = [];
        }

        subscribe(observer) {
            this.observers.push(observer);
        }

        notify() {
            this.observers.forEach((observer) => observer());
        }
    }

    // Create an array of settings
    const $settings = [
        {
            url: '/backcodes/codelife.html',
            glow: true,
            speed: 25,
            wait: 0,
        },
        {
            url: '/js/jquery.bgterminal.js',
            glow: true,
            speed: 25,
            wait: 0,
        },
        {

        }
    ]

    //Containers to be handle by bgTerminal
    const $terminal = $("<div id='terminal' style='z-index: -1;'></div>");
    const $terminal2 = $("<div id='terminal2' style='z-index: -1;'></div>");
    const $terminal3 = $("<div id='terminal3' style='z-index: -1;'></div>");
    const $terminal4 = $("<div id='terminal4' style='z-index: -1;'></div>");

    function hidebgTerminal(container, ms) {
        return new Promise((resolve => {
            setTimeout(function () {
                resolve(
                    console.log(`Hidding terminal in ${container} container!!`),
                    $(container).removeClass('bgterminal-show'),
                    $(container).addClass('bgterminal-hide'),
                    console.log(`Terminal hidded in ${container} container.Wait 20 secs`),
                );
            }, ms);
        }))
    }

    function showbgTerminal(container, ms) {
        return new Promise((resolve => {
            setTimeout(function () {
                resolve(
                    console.log(`Showing terminal in ${container} container`),
                    $(container).removeClass('bgterminal-hide'),
                    $(container).addClass('bgterminal-show'),
                    console.log(`Terminal is now visible in ${container} container`)
                );
            }, ms)
        }))
    }

    function cleanContainer(container, ms) {
        return new Promise((resolve => {
            setTimeout(function () {
                resolve(
                    console.log(`Cleaning ${container} container`),
                    $(container).empty(), //Waiting 5 secs before Cleaning container
                    console.log(`Container ${container} cleaned`),
                    console.log(`Removing container ${container} from containerRow component`),
                    $(container).remove(),
                    console.log(`Container ${container} removed from containerRow component`)
                );
            }, ms)
        }))
    }

    function createContainer(container, ms) {
        return new Promise((resolve => {
            setTimeout(function () {
                resolve(
                    console.log(`Adding container ` + `#` + $(container).prop("id") + ` to containerRow component`),
                    $('#containerRow').append(container),
                    $(container).removeClass('bgterminal-hide'),
                    $(container).removeClass('bgterminal-show'),
                    console.log(`Container ` + `#` + $(container).prop("id") + ` successfully added to containerRow component`)
                );
            }, ms)
        }))
    }

    //Putting thread to sleep 
    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    // Background animation function
    function bgTerminal(container, settings, ms) {
        // Your animation logic here
        console.log(`Animation started in ${container} container`);
        return new Promise((resolve => {
            setTimeout(function () {
                resolve(
                    $(container).bgTerminal({
                        url: settings.url, // The page to load and display in the terminal
                        glow: settings.glow, // If true, the terminal will have a glowing effect
                        speed: settings.speed, // Type speed in milliseconds. This is the time between two character are typed
                        wait: settings.wait, // The number of milliseconds to wait at the end of the line (when \n is found)
                    })
                )
            }, ms);
        }))
    }

    async function asyncCall(terminal, settings) {
        // Queue of promises
        const queue = [];

        let idContainer1 = $(terminal).prop("id");

        console.log('Starting bgTerminal animation process');

        queue.push(await createContainer(terminal, 500));
        queue.push(await bgTerminal('#' + idContainer1, settings[0], 2000)); //Wait 2 secs then execute bgTerminal
        queue.push(await hidebgTerminal('#' + idContainer1, 1 * 60 * 1000)); //Wait 1 min then execute hidebgTerminal
        queue.push(await showbgTerminal('#' + idContainer1, 20000)); //Wait 0.5 min after the hidebgTerminal executes itself and then execute showbgTerminal  
        queue.push(await hidebgTerminal('#' + idContainer1, 10000));
        queue.push(await cleanContainer('#' + idContainer1, 10000));

        queue.push(await sleep(5000)); //Putting thread to sleep without block JavaScript’s execution thread 

        queue.push(await createContainer(terminal, 500));
        queue.push(await bgTerminal('#' + idContainer1, settings[1], 2000));
        queue.push(await hidebgTerminal('#' + idContainer1, 1 * 60 * 1000));
        queue.push(await showbgTerminal('#' + idContainer1, 20000));
        queue.push(await hidebgTerminal('#' + idContainer1, 10000));
        queue.push(await cleanContainer('#' + idContainer1, 10000)); //removes childs, descendant and text on container 2 

        //Subscribe to the observer and remove from the queue of promises(Testing)
        /*queue.forEach((promise) => {
            animationObserver.subscribe(promise);
            // Remove the item from the queue
            const index = queue.indexOf(promise);
            if (index !== -1) {
                queue.splice(index, 1);
                console.log(`Element at index ` + index + ` removed from queue`)
            }
        })*/
        queue.forEach((promise) => animationObserver.subscribe(promise));
        console.log(`bgTerminal animation process finished`);
    }

    //Create an observer to manage the animation queue
    const animationObserver = new Observer();

    //Starting bgTerminal animation process secuence 1st Way
    asyncCall($terminal, $settings).then(() => {
        asyncCall($terminal2, $settings)
    });

    //delayedbgTerminalAnimationProcess();

    // Notify the observer to start the bgTerminal animation
    animationObserver.notify();

</script>
<script src='/js/main.js'></script>
<script src='/js/modals.js'></script>

</html>